---
phase: 04-level-content-and-mode-validation
plan: "06"
type: execute
wave: 4
depends_on:
  - "04-05"
files_modified: []
autonomous: false
requirements:
  - LVLS-01
  - LVLS-02
  - LVLS-03
  - LVLS-04
  - MODE-01
  - MODE-02
  - MODE-03
  - MODE-04

must_haves:
  truths:
    - "Player can load the app and see a level select grid with 21 levels"
    - "Starting level 1 shows the hint overlay before any vinyls are interactable"
    - "Dismissing the overlay starts the level immediately"
    - "Completing a rush level (level 8 or 14) shows urgency animation at <= 10 seconds remaining"
    - "Rush timer expires and flows directly into LevelComplete with 1 star (no crash)"
    - "A blackout level (level 5 or 13) shows column labels for 3 seconds then hides them without flicker"
    - "A customer level (level 4 or 7) shows 'NAME vuole: ...' panel below the HUD"
    - "A sleeve-match level (level 9 or 15) renders cover images on slots and allows correct matching"
  artifacts:
    - path: "src/components/LevelHintOverlay.tsx"
      provides: "Overlay visible in browser — dismissable"
      contains: "LevelHintOverlay"
  key_links: []
---

<objective>
Human end-to-end verification across all 7 game modes and the hint overlay. Claude runs the dev server and confirms it starts cleanly; the human plays through representative levels to validate each mode behaves per the CONTEXT decisions.

Purpose: Automated TypeScript checks cannot verify visual behaviors — flicker absence, animation timing, panel positioning, overlay dismiss UX. This checkpoint captures those.

Output: Verified game behavior across all modes; any issues fed back as bugs.
</objective>

<execution_context>
@/Users/martha2022/.claude/get-shit-done/workflows/execute-plan.md
@/Users/martha2022/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-level-content-and-mode-validation/04-CONTEXT.md
@.planning/phases/04-level-content-and-mode-validation/04-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build verification — confirm zero TS errors and clean build</name>
  <files></files>
  <action>
Run the following checks from /Users/martha2022/Documents/Sleevo:

1. `npx tsc --noEmit` — must exit zero errors
2. `npm run build` — must succeed (Vite build)

Report the output of both commands. If either fails, stop and report the errors for diagnosis — do NOT proceed to the checkpoint.
  </action>
  <verify>
    <automated>cd /Users/martha2022/Documents/Sleevo && npx tsc --noEmit && npm run build 2>&1 | tail -5</automated>
    <sampling_rate>run before presenting checkpoint</sampling_rate>
  </verify>
  <done>Both tsc --noEmit and npm run build complete with zero errors. Build output exists in /dist.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: End-to-end mode verification across all 7 game modes</name>
  <what-built>
Complete Phase 4 implementation:
- 21 levels with customerName on customer-mode levels and level 1 reduced to 4 vinyls
- LevelHintOverlay overlay shown on every level load, dismissed by click or "Inizia" button
- Blackout mode: column labels hide after 3 seconds, driven by BLACKOUT_TICK (no flicker)
- Customer mode: panel shows "NAME vuole: ..." with Italian name from level definition
- Rush mode: urgency animation fires at 10 seconds remaining (not 30)
- Rush expiry flows into LevelComplete with 1 star, no separate screen
  </what-built>
  <how-to-verify>
Run `npm run dev` in /Users/martha2022/Documents/Sleevo and open http://localhost:5173

**Check 1 — Hint overlay (LVLS-04):**
1. Start any level from the level select screen
2. Confirm a full-screen overlay appears with the mode label and hint text
3. Confirm vinyls CANNOT be dragged while the overlay is visible
4. Click "Inizia" — overlay dismisses, gameplay begins
5. Press Restart (if available) — overlay should reappear

**Check 2 — Blackout mode (MODE-02):**
1. Navigate to level 5 or 13 (blackout)
2. Dismiss the hint overlay
3. Confirm column labels ARE visible for approximately 3 seconds
4. Confirm labels HIDE smoothly (fade, no flicker/double-fire)
5. Confirm labels stay hidden for the rest of the level

**Check 3 — Customer mode (MODE-03):**
1. Navigate to level 4 (customer — Marco) or level 7 (customer — Sofia)
2. Dismiss the hint overlay
3. Confirm the customer panel shows e.g. "Marco vuole: ..." (with the Italian name, not "Il cliente vuole")
4. Confirm the panel is positioned below the HUD, above the shelf — always visible

**Check 4 — Rush mode (MODE-01):**
1. Navigate to level 8 or 14 (rush mode)
2. Dismiss the hint overlay
3. Watch the timer in the HUD — confirm it counts DOWN (not up)
4. Wait until 10 seconds remaining — confirm timer turns red and pulses
5. Let the timer expire — confirm the level auto-completes and LevelComplete appears (not a crash, not a special "time's up" screen)

**Check 5 — Sleeve-match (MODE-04):**
1. Navigate to level 9 or 15 (sleeve-match)
2. Dismiss the hint overlay
3. Confirm slot areas show cover images (or hint visuals)
4. Confirm dragging the correct vinyl to the matching slot registers as valid

**Check 6 — Level count and mode spread:**
1. Open level select — confirm 21 levels are visible
2. Confirm level 1 has fewer vinyls than later levels (should feel easy)

Report any issues found. Type "approved" if all checks pass.
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass. Describe any specific issues if not.</resume-signal>
</task>

</tasks>

<verification>
All 7 game modes verified by human play-through. TypeScript and build both clean.
</verification>

<success_criteria>
- npx tsc --noEmit: zero errors
- npm run build: succeeds
- Human confirms: hint overlay appears and dismisses correctly
- Human confirms: blackout labels hide after 3s without flicker
- Human confirms: customer panel shows Italian name
- Human confirms: rush urgency at 10s, expiry flows to LevelComplete
- Human confirms: sleeve-match level shows cover hints
- Human confirms: 21 levels visible in level select
</success_criteria>

<output>
After completion, create `.planning/phases/04-level-content-and-mode-validation/04-06-SUMMARY.md`
</output>
